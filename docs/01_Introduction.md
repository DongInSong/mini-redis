# 1. 서론

[**&#8592; 목차로 돌아가기**](./00_README.md)

## 1.1. 프로젝트 개요 및 목표

-   **프로젝트 정의** 
    > 비동기 Redis 서버의 주요 기능들을 처음부터 구현하는 학습용 프로젝트입니다. 최종적으로는 python에 사용되는 Redis 라이브러리(redis-py)를 이용해 기존 Redis를 변경 없이 대체할 수 있도록 목표를 설정하였습니다.

-   **핵심 목표**
    > 비동기 네트워크 서버 구조와 Redis 내부 동작을 동시에 이해하고 구현하는 데 중점을 두었습니다. 이벤트 기반 서버의 설계와 연결 처리, I/O 흐름 등을 직접 다뤘으며, 동시에 RESP 프로토콜 구현과 명령어 파싱, 데이터 처리 로직에도 심도 있게 접근하여 Redis의 핵심 구조를 재현하는 데 집중했습니다.

-   **주요 구현 기능**:
    - Generic Commands
        - 기본적인 Redis 명령어인 PING, DEL, KEYS 등을 구현했습니다.   
        - KEYS 명령은 와일드카드 패턴 매칭을 지원하며, *, ?, user:* 등 다양한 패턴 입력이 가능합니다.

    - String Commands
        - SET, GET, SETEX 등의 문자열 관련 명령어를 구현했습니다.
        - 숫자형 문자열을 대상으로 하는 카운터 연산 명령어도 지원합니다: INCR, DECR, INCRBY, DECRBY

    - 키 만료 기능
        - SETEX 명령어를 이용하면 데이터에 TTL(Time-To-Live)을 설정할 수 있으며, 만료된 키는 내부 로직에 따라 삭제되어 더 이상 접근할 수 없습니다.
    
    - PUB/SUB (Publish / Subscribe)
        - 클라이언트는 여러 채널을 동시에 구독할 수 있으며, PUBLISH를 통해 실시간 메시지를 수신할 수 있습니다.
        - SUBSCRIBE 명령은 다수의 인자를 받아 한 번에 여러 채널 구독이 가능합니다.
        - UNSUBSCRIBE는 인자를 생략하면 모든 구독이 해제되고, 인자를 지정하면 특정 채널만 선택적으로 구독 해제할 수 있습니다.

    - 비동기 멀티스레드 I/O 처리
        - Boost.Asio의 Proactor 패턴을 기반으로 서버를 구현했습니다.
        - CPU 코어 수에 따라 자동 생성되는 **스레드 풀(thread pool)**이 여러 클라이언트의 요청을 비동기적으로 처리합니다.

    - 설정 관리
        - 서버 포트 번호, 호스트 주소 등의 설정은 config.yaml 파일로 분리되어 관리됩니다.
        - 이를 통해 새로운 빌드 없이도 설정을 변경할 수 있으며, 배포 및 운영 환경에서의 활용도를 높였습니다.

## 1.2. 프로젝트의 의의

-   **기술적 학습**:
    -   **비동기 프로그래밍 익히기**
        > Boost.Asio의 io_context와 비동기 콜백 구조를 직접 다뤄보면서, 이벤트 기반 프로그래밍이 어떻게 동작하는지 몸으로 익혔습니다. 실제로 서버가 어떻게 여러 클라이언트 요청을 동시에 처리하는지 체감할 수 있었습니다.
    -   **네트워크 프로토콜 구현**
        > Redis의 직렬화 프로토콜(RESP)을 직접 파싱하고, 바이트 스트림을 주고받는 통신 모듈을 만들면서 네트워크의 가장 밑바닥부터 데이터를 다뤄보는 경험을 했습니다.
    -   **모던 C++ 활용**
        > `std::shared_ptr`, `std::weak_ptr`로 객체(여러 handlers) 생명주기를 안정적으로 관리하고, `std::variant`를 활용해 STRING, LIST, HASH, SET, SORTED SET 등의 구조로 확장 가능한 데이터 저장소를 설계했습니다.
    -   **디자인 패턴 적용**
        > 명령어 처리 구조에는 전략 패턴을 적용해서 커맨드들을 분리했고 설정 관리는 Config 클래스로 따로 빼서 서버 로직과 분리했습니다. 실제로 디자인 패턴이 왜 필요한지, 적용했을 때 얼마나 깔끔해지는지 체감할 수 있었습니다.

-   **문제 해결 경험**
    > 동시성 문제 해결을 위한 `std::mutex` 사용, 비동기 환경에서의 콜백 체인 관리, 그리고 CMake로 모듈화된 빌드 시스템을 구성하였고 gtest를 이용한 단위 시험을 하며 실제 프로젝트에서 쓰이는 빌드 구조와 테스트 방식을 익힐 수 있었습니다.

---
[**다음: 시스템 설계 &#8594;**](./02_System_Design.md)
