# 5. 결론 및 회고

[**&#8592; 목차로 돌아가기**](./00_README.md)

## 5.1. 프로젝트 요약

본 프로젝트는 Redis의 핵심 기능을 C++로 직접 구현한다는 초기 목표를 성공적으로 달성했습니다.     
최종적으로는 비동기 멀티스레드 네트워크 계층, 유연한 명령어 처리기, 안전한 인메모리 저장소를 갖춘 기능적 서버를 완성했습니다.     
특히, 표준 Redis 클라이언트(`redis-py`)를 사용하는 FastAPI 애플리케이션과의 통합 테스트를 성공적으로 통과함으로써, 단순한 기술 학습을 넘어 실제 애플리케이션 환경에서 동작 가능한 수준의 호환성과 안정성을 입증했습니다.

## 5.2. 배운 점

-   **비동기 I/O**
  > Boost.Asio를 처음 사용하여 비동기 서버를 구축하였습니다. 실제 서비스되는 서버를 직접 보지는 못하였지만 Proactor 패턴을 직접 적용해봄으로서 어떤 식으로 작동되는지 직접 체감할 수 있는 기회가 되었습니다. 또한 적은 리소스로 수많은 클라이언트를 동시에 처리할 수 방법을 배우기도 하였습니다. 콜백 기반의 비동기 프로그래밍은 단순한 코드 작성을 넘어 흐름 중심의 사고로 생각할 수 있는 새로운 관점을 열게 해줬습니다. 처음엔 낯설었지만 약 일주일간 공부하며 비동기의 진가를 배울 수 있었습니다.

-   **디자인 패턴의 중요성**
  > 복잡한 if-else문은 정말 질색이었습니다. `command` 클래스에 여러 명령어를 구현하면서 `if-else`문이 늘어날 수록 해결을 해야겠다는 생각이 점점 커져 하루 날잡고 명령문을 처리하는 구조를 수정하였습니다. Strategy 패턴을 본격 적용하였고 그 결과 `dispatcher`를 중심으로 `string_command`와 `pubsub_command`으로 명령어 구현부를 분리할 수 있었고 더 나아가 이후 추가될 수 있는 다른 데이터 구조를 손쉽게 추가할 수 있는 구조를 만들 수 있었습니다. 이제 새로운 명령어를 추가할 때 기존 코드를 거의 건드리지 않아도 되고 실수도 확연히 줄어들었습니다. 디자인 패턴이 왜 중요한지 다시 몸소 체감한 경험이었습니다.

-   **C++에서의 메모리 관리**
  > 이번 프로젝트는 `shared_ptr`와 `weak_ptr`의 미묘한 차이를 실제로 경험하는 실용적인 학습의 장이었습니다. 특히 `session`과 `PubSubCommandHandler` 사이에서 발생할 수 있었던 순환 참조 문제를 마주하며 순환 고리를 끊기 위해 `weak_ptr`이 왜 필요하고 언제 사용해야 하는지 이론이 아닌 실전에서 이해할 수 있었습니다. 메모리 구조와 객체 생명 주기를 깊이 있게 고민하게 만든 계기가 되었습니다.

-   **테스트하는 습관**
  > 지금까지 저는 새로운 기능을 추가할 때마다 서버를 실행하고 클라이언트를 켜고, 처음부터 끝까지 모든 기능을 하나하나 손으로 테스트하곤 했습니다. 좋게 말하면 꼼꼼한 스타일이지만, 실제로는 많은 시간을 비효율적으로 낭비하고 있었다는 걸 이번에 깨달았습니다. 그래서 이번 프로젝트에서는 기능별로 명확한 테스트 케이스를 작성하고 자동으로 확인하는 습관을 들이기 시작했습니다. 그 결과 개발 속도도 빨라졌고 코드 변경에 대한 불안감도 크게 줄었습니다. 무엇보다 초록 PASS를 보는 즐거움을 알게 되었습니다.

## 5.3. 향후 계획

현재 구현도 충분히 좋다고 생각하지만 구현하면서 이후 데이터 구조를 추가하기 위해 여러 리팩토링을 진행했었습니다. 이를 활용하고자 이후 아래와 같은 기능을 구현하고자 합니다.

-   **다양한 자료구조 지원**
  > `LIST`, `HASH`, `SET`, `SORTED SET` 명령어     
  > (현재 `store`은 `std::variant` 기반으로, `command`는 전략 패턴으로 이미 구조가 충분히 설계되어 있습니다.)
-   **데이터 지속성**
  > RDB(특정 시점의 스냅샷 저장) 또는 AOF(모든 쓰기 명령어를 로그 파일에 기록)와 같은 백업 메커니즘을 구현하여 서버가 재시작되어도 데이터가 보존되도록 합니다.
-   **로깅 시스템**
  > `spdlog`와 같은 로깅 라이브러리를 도입하여 설정 가능한 로그 레벨, 파일 기반 로깅, 비동기 로깅 등을 추가합니다.

## 감사합니다!

---
[**&#8592; 이전: 테스트 및 검증**](./04_Testing.md)